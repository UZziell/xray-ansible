version: '3.9'
services:
  xui:
    image: docker.io/uzziel/triplex:{{ xui_image_tag }}
    # container_name: x-ui
    volumes:
      - {{ xui_data_dir }}/db/:/etc/x-ui/
      - {{ xui_data_dir }}/certs/:/etc/ssl/certs/
    restart: unless-stopped
    # network_mode: host
    ports:
      - 80:80
      - 443:443
      - 334:334
      - 2095:2095
      - 2053:2053
      - {{ xui_port }}:{{ xui_port }}

  nginx:
    image: nginx:{{ nginx_image_tag }}
    volumes:
      - {{ xui_project_dir }}/nginx.conf:/etc/nginx/conf.d/default.conf
      - {{ xui_project_dir }}/decoy.html:/usr/share/nginx/html/index.html
